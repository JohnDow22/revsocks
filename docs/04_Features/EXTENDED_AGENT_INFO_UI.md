# Feature: Extended Agent Information in Admin UI

**–í–µ—Ä—Å–∏—è:** 2.9  
**–î–∞—Ç–∞:** 09.01.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

## üìå –ü—Ä–æ–±–ª–µ–º–∞

Admin Console –≤—ã–≤–æ–¥–∏–ª –º–∏–Ω–∏–º—É–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≥–µ–Ω—Ç–∞—Ö ‚Äî —Ç–æ–ª—å–∫–æ ID, Alias, Mode, IP –∏ Last Seen. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥–µ–ª–∏:
- –ù–∞ –∫–∞–∫–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ IP:Port –ø–æ–¥–Ω—è—Ç SOCKS5 –ø—Ä–æ–∫—Å–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –°—Ç–∞—Ç—É—Å —Å–µ—Å—Å–∏–∏ (Online/Offline) –≤ –æ–¥–Ω–æ–π –∫–æ–ª–æ–Ω–∫–µ
- –í–µ—Ä—Å–∏—é –∞–≥–µ–Ω—Ç–∞
- –ö–∞–∫ –¥–æ–ª–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ–∫—É—â–∞—è —Å–µ—Å—Å–∏—è (uptime)

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–†–∞—Å—à–∏—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API –∏ Python Console –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≥–µ–Ω—Ç–∞—Ö —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ —Å—Ç–∞—Ç—É—Å–∞.

**Backend (Go):**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `Version` –≤ `AgentConfig` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—Ä—Å–∏–∏ –∞–≥–µ–Ω—Ç–∞
- –†–∞—Å—à–∏—Ä–µ–Ω API endpoint `/api/agents` —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π `AgentInfoResponse` 
- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤ `SessionManager`:
  - `GetSessionInfo()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å SOCKS5 –∏ uptime —Å–µ—Å—Å–∏–∏
  - `GetSocksAddr()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∞–¥—Ä–µ—Å SOCKS5 –ø—Ä–æ–∫—Å–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ `RegisterAgent()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–µ—Ä—Å–∏–∏ –∞–≥–µ–Ω—Ç–∞

**Frontend (Python Console):**
- –ù–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ: `SOCKS5`, `Status`
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ –≤ verbose —Ä–µ–∂–∏–º–µ (`-v`): `Version`, `Uptime`, `Sleep`, `Jitter`, `First Seen`
- –¶–≤–µ—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–∞: `‚óè ONLINE` (–∑–µ–ª—ë–Ω—ã–π) / `‚óè OFFLINE` (–∫—Ä–∞—Å–Ω—ã–π)
- –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (uptime –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ `1h 30m`, `2d 5h`)

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
# –ë–∞–∑–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤
revsocks> agents list

# –í—ã–≤–æ–¥:
#  ID       ‚îÇ Alias ‚îÇ Mode   ‚îÇ IP            ‚îÇ SOCKS5              ‚îÇ Status        ‚îÇ Last Seen
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#  notebook ‚îÇ test  ‚îÇ TUNNEL ‚îÇ 192.168.1.108 ‚îÇ 127.0.0.1:39711     ‚îÇ ‚óè ONLINE      ‚îÇ 23s ago

# –ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Å –≤–µ—Ä—Å–∏–µ–π –∏ uptime
revsocks> agents list -v

# –í—ã–≤–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:
# Version ‚îÇ Uptime ‚îÇ Sleep ‚îÇ Jitter ‚îÇ First Seen
# ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
#  v3     ‚îÇ 1h 23m ‚îÇ 60    ‚îÇ 10%    ‚îÇ 2d ago
```

## üîß API

### GET /api/agents

**–û—Ç–≤–µ—Ç (200 OK):**

```json
[
  {
    "id": "notebook",
    "alias": "test",
    "mode": "TUNNEL",
    "sleep_interval": 60,
    "jitter": 10,
    "last_seen": "2026-01-09T23:23:29.491837Z",
    "first_seen": "2026-01-09T20:00:00.000000Z",
    "ip": "192.168.1.108",
    "version": "v3",
    "socks_addr": "127.0.0.1:39711",
    "is_online": true,
    "session_uptime": 4920
  }
]
```

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- `version` (string) ‚Äî –≤–µ—Ä—Å–∏—è –∞–≥–µ–Ω—Ç–∞, –ø–µ—Ä–µ–¥–∞–Ω–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- `socks_addr` (string) ‚Äî –∞–¥—Ä–µ—Å SOCKS5 –ø—Ä–æ–∫—Å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `host:port`
- `is_online` (boolean) ‚Äî —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏
- `session_uptime` (integer) ‚Äî –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã —Å–µ—Å—Å–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏:**

### Unit Tests (Go)
- ‚úÖ `TestNewAgentManager` ‚Äî –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞
- ‚úÖ `TestRegisterAgent_NewAgent` ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ —Å –≤–µ—Ä—Å–∏–µ–π
- ‚úÖ `TestRegisterAgent_ExistingAgent` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- ‚úÖ `TestUpdateState`, `TestUpdateAlias`, `TestDeleteAgent` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- ‚úÖ `TestThreadSafety` ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (100 –≥–æ—Ä—É—Ç–∏–Ω)
- ‚úÖ `TestAPIAuth_*` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è API
- ‚úÖ `TestListAgents_Multiple` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ `TestUpdateAgentConfig`, `TestHealthCheck` ‚Äî —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª API

**E2E Tests (Go)**
- ‚úÖ `TestE2E_CurlRealProxy` ‚Äî SOCKS5 —á–µ—Ä–µ–∑ curl (1.64s)
- ‚úÖ `TestE2E_CurlRealProxyHTTPS` ‚Äî HTTPS —á–µ—Ä–µ–∑ SOCKS5 (2.03s)
- ‚úÖ `TestE2E_CurlRealProxyHTTP` ‚Äî HTTP —á–µ—Ä–µ–∑ SOCKS5 (1.41s)
- ‚úÖ `TestE2E_Basic` ‚Äî –±–∞–∑–æ–≤—ã–π E2E —Ç–µ—Å—Ç (0.91s)
- ‚úÖ `TestE2E_Reconnect` ‚Äî –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø–æ—Ä—Ç–æ–≤ (1.61s)
- ‚úÖ `TestE2E_MultipleClients` ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–≥–µ–Ω—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–º –ø–æ—Ä—Ç—É (1.12s)
- ‚úÖ `TestE2E_TLS` ‚Äî TLS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (1.21s)
- ‚úÖ `TestE2E_BeaconSleepCycle` ‚Äî beacon —Ä–µ–∂–∏–º (1.41s)
- ‚úÖ `TestE2E_BeaconReconnect` ‚Äî –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤ beacon (10.84s)

**E2E Tests (Python Console)**
- ‚úÖ `TestConsoleBasic::test_console_starts_and_connects` ‚Äî –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Å–æ–ª–∏
- ‚úÖ `TestConsoleBasic::test_status_command` ‚Äî –∫–æ–º–∞–Ω–¥–∞ `status`
- ‚úÖ `TestConsoleBasic::test_info_command` ‚Äî –∫–æ–º–∞–Ω–¥–∞ `info`
- ‚úÖ `TestConsoleBasic::test_help_command` ‚Äî –∫–æ–º–∞–Ω–¥–∞ `help`
- ‚úÖ `TestAgentsList::test_agents_list_empty` ‚Äî –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫
- ‚úÖ `TestAgentsList::test_agents_list_with_agent` ‚Äî —Å–ø–∏—Å–æ–∫ —Å –∞–≥–µ–Ω—Ç–æ–º
- ‚úÖ `TestAgentsList::test_agents_list_verbose` ‚Äî verbose —Ä–µ–∂–∏–º
- ‚úÖ `TestAgentManagement::test_agent_sleep` ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –≤ SLEEP
- ‚úÖ `TestAgentManagement::test_agent_wake` ‚Äî –ø–µ—Ä–µ–≤–æ–¥ –≤ TUNNEL
- ‚úÖ `TestAgentManagement::test_agent_rename` ‚Äî –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ `TestAgentManagement::test_agent_sleep_with_jitter` ‚Äî SLEEP —Å jitter
- ‚úÖ `TestAgentDelete::test_agent_delete_force` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ `TestAgentErrors::test_agent_not_found` ‚Äî –æ—à–∏–±–∫–∞ –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ `TestSessionManagement::test_session_kill` ‚Äî —É–±–∏–π—Å—Ç–≤–æ —Å–µ—Å—Å–∏–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
```
‚úÖ Go Unit Tests:        PASS (0.692s)
‚úÖ Go E2E Tests:         PASS (23.958s)  
‚úÖ Python Console E2E:   17 passed (67.55s)
```

## üìä –°—Ç–∞—Ç—É—Å

- **–í–µ—Ä—Å–∏—è:** 2.9
- **–î–∞—Ç–∞:** 09.01.2026
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready
- **–¢–µ—Å—Ç—ã:** 26/26 passed (–≤—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª—ë–Ω—ã–µ)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** Unit + E2E (—Ä–µ–∞–ª—å–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∏, –±–µ–∑ –º–æ–∫–æ–≤)
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- [SessionManager](../../internal/server/session.go) ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Å—Å–∏–π
- [AgentConfig](../../internal/server/agent_manager.go) ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–≥–µ–Ω—Ç–∞  
- [Admin API](../../internal/server/api.go) ‚Äî HTTP API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [Console UI](../../tools/console/commands/agents.py) ‚Äî Python –∫–æ–Ω—Å–æ–ª—å

## üìù –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**Backend:**
- `internal/server/agent_manager.go` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `Version`
- `internal/server/api.go` ‚Äî –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `AgentInfoResponse`
- `internal/server/session.go` ‚Äî –º–µ—Ç–æ–¥—ã `GetSessionInfo()`, `GetSocksAddr()`
- `internal/server/*_test.go` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ç–µ—Å—Ç—ã

**Frontend:**
- `tools/console/commands/agents.py` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞, –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `_format_uptime()`
- `tools/console/tests/test_e2e_*.py` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –ø–æ–¥ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å —Å–µ—Ä–≤–µ—Ä: `make`
2. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ `pip install -r requirements.txt`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä —Å Admin API: `./revsocks-server -admin-api -admin-port :8081`
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å: `python3 tools/console/main.py`

## ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è

–°—Ç–∞—Ä—ã–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:
- –ê–≥–µ–Ω—Ç—ã –±–µ–∑ –ø–æ–ª—è `Version` –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ "v2" (fallback)
- –°–µ—Å—Å–∏–∏ –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± uptime –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "-"
- API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
