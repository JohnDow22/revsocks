# Feature: Stealth Build (Config-Driven –±–∏–Ω–∞—Ä–Ω–∏–∫)

**–í–µ—Ä—Å–∏—è:** 2.8-stealth  
**–î–∞—Ç–∞:** 09.01.2026  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready

---

## üìå –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º –∑–∞–ø—É—Å–∫–µ `revsocks` —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—Å–µ—Ä–≤–µ—Ä, –ø–∞—Ä–æ–ª—å, —Ä–µ–∂–∏–º—ã) –≤–∏–¥–Ω—ã:
- –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ (`ps aux`, `history`);
- –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö (`systemd` unit, crontab);
- –≤ —Å–∫—Ä–∏–ø—Ç–∞—Ö persistence.

–≠—Ç–æ –ø–æ–≤—ã—à–∞–µ—Ç —Ä–∏—Å–∫ –¥–µ—Ç–µ–∫—Ç–∞ –∏ —É—Ç–µ—á–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –æ–¥–Ω–æ–≥–æ —É–∑–ª–∞.

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–í–≤–µ–¥—ë–Ω —Ä–µ–∂–∏–º **Stealth Build** ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ —Å **–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏**, —Å–æ–±–∏—Ä–∞–µ–º—ã–π –∏–∑ YAML-–∫–æ–Ω—Ñ–∏–≥–∞.

–ö–ª—é—á–µ–≤—ã–µ –∏–¥–µ–∏:
- **Config-driven:** –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (`server`, `password`, `reconnect_*`, `tls_enabled`, `quiet_mode`, –æ–ø—Ü–∏–∏ UPX) –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `config.yaml`;
- **–û–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è —Å–±–æ—Ä–∫–∞:** —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚Äî –Ω–µ–±–æ–ª—å—à–æ–π ELF-–±–∏–Ω–∞—Ä–Ω–∏–∫ (`sessions` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –±–µ–∑ –¥–æ–ø. –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤;
- **Stealth –≤ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö:** –≤ `ps aux` –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø—É—Ç—å/–∏–º—è —Ñ–∞–π–ª–∞ –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤;
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ UPX:** —Å–∂–∞—Ç–∏–µ –¥–æ ~2.6 MB –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞;
- **–ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:** –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ `revsocks` –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –≤–Ω–æ—Å–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–∞—Ç—á–∏ –∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö.

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
cd Linux/MyCustomProjects/RevSocks_my/revsocks

# 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cp config.yaml.example config.yaml
nano config.yaml

# 2. –°–æ–±—Ä–∞—Ç—å stealth –≤–µ—Ä—Å–∏—é
make stealth          # –∏–ª–∏ ./build_stealth.sh

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫
./sessions            # –∏–º—è –±–µ—Ä—ë—Ç—Å—è –∏–∑ stealth.build.output_name
```

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫:
- –Ω–∞–ø—Ä—è–º—É—é (`./sessions`);
- –≤ —Ñ–æ–Ω–µ (`nohup ./sessions >/dev/null 2>&1 &`);
- –∏–∑ `systemd`/cron —Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º –ø—Ä–æ—Ü–µ—Å—Å–∞ (—á–µ—Ä–µ–∑ `exec -a`).

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `config.yaml`

```yaml
stealth:
  server: "192.168.1.108:10443"      # IP:PORT —Å–µ—Ä–≤–µ—Ä–∞
  password: "YOUR_PASSWORD"          # –ü–∞—Ä–æ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  reconnect_limit: 0                 # 0 = –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
  reconnect_delay: 30                # –ó–∞–¥–µ—Ä–∂–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
  tls_enabled: true                  # TLS —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
  quiet_mode: true                   # –¢–∏—Ö–∏–π —Ä–µ–∂–∏–º

  build:
    output_name: "sessions"          # –ò–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
    strip_symbols: true              # –£–¥–∞–ª–∏—Ç—å debug-—Å–∏–º–≤–æ–ª—ã
    upx_enabled: true                # –í–∫–ª—é—á–∏—Ç—å UPX
    upx_level: 7                     # 1-9, —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 7
    upx_lzma: true                   # LZMA-—Å–∂–∞—Ç–∏–µ
```

---

## üì¶ UPX Compression

### –£—Ä–æ–≤–Ω–∏ —Å–∂–∞—Ç–∏—è

| Level | Compression | –†–∞–∑–º–µ—Ä | –°–∫–æ—Ä–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|-------|-------------|--------|----------|--------------|
| 1-3 | Fast | ~3.5MB | –ë—ã—Å—Ç—Ä–æ | –î–µ–±–∞–≥/—Ç–µ—Å—Ç—ã |
| 4-6 | Medium | ~3.0MB | –°—Ä–µ–¥–Ω–µ | –û–±—ã—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
| **7** | **Good** | **~2.6MB** | **–°—Ä–µ–¥–Ω–µ** | **‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** |
| 8-9 | Best | ~2.4MB | –ú–µ–¥–ª–µ–Ω–Ω–æ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π stealth |

**–†–∞–∑–º–µ—Ä—ã:**
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π revsocks: ~8.8MB
- –° UPX level 7: **~2.6MB** (29% –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª–∞)

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Å–±–æ—Ä–∫–∏

–°–∫—Ä–∏–ø—Ç `build_stealth.sh` –≤—ã–ø–æ–ª–Ω—è–µ—Ç:
1. Backup `main.go` ‚Üí `main.go.backup`.
2. `sed`-–∑–∞–º–µ–Ω—ã: –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –≤ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥.
3. –°–±–æ—Ä–∫–∞ Go-–±–∏–Ω–∞—Ä–Ω–∏–∫–∞ —Å —Ñ–ª–∞–≥–∞–º–∏ `-s -w` –∏ `CGO_ENABLED=0`.
4. UPX-—Å–∂–∞—Ç–∏–µ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ).
5. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ `main.go`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Smoke-—Ç–µ—Å—Ç:** `make stealth-test` (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–ø—É—Å–∫–∞ –∏ –±–∞–∑–æ–≤–æ–≥–æ –∫–æ–Ω–Ω–µ–∫—Ç–∞).
- **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
  - `ps aux | grep sessions` ‚Äî –≤ –≤—ã–≤–æ–¥–µ –Ω–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
  - `file sessions` ‚Äî ELF 64-bit LSB executable, —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏ —Å–ª–∏–Ω–∫–æ–≤–∞–Ω.

---

## ‚ùì FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏?**
A: –ù–µ—Ç, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã –≤–Ω—É—Ç—Ä–∏ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞.

**Q: –í–∏–¥–Ω—ã –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `strings`?**
A: –ü–æ—Å–ª–µ UPX —Å–∂–∞—Ç–∏—è ‚Äî –Ω–µ—Ç, –¥–∞–Ω–Ω—ã–µ —Å–∂–∞—Ç—ã –∏ –æ–±—Ñ—É—Å—Ü–∏—Ä–æ–≤–∞–Ω—ã.

---

## üìä –°—Ç–∞—Ç—É—Å

- **–í–µ—Ä—Å–∏—è:** 2.8-stealth  
- **–î–∞—Ç–∞:** 09.01.2026  
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ Production Ready  

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- –°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏: `build_stealth.sh`
- Makefile-—Ç–∞—Ä–≥–µ—Ç—ã: `make stealth`, `make stealth-test`, `make stealth-clean`
- Multi-Server Failover: [MULTI_SERVER_FAILOVER.md](MULTI_SERVER_FAILOVER.md)

